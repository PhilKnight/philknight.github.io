<!DOCTYPE html>
<html>
  <head>
    <title>ONE MAP XCP</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <link rel="shortcut icon" href="http://cartodb.com/assets/favicon.ico" />
    <style>

    html, body, #map{
        height: 100%;
        padding: 10;
        margin-bottom: 35px;
      }

      .navbar {
        background-color: #333;
        position: fixed;
        bottom: 0;
        width: 100%;
        height: 35px;
        font-family: arial, sans-serif;
        color: white;
        font-weight: bold;
      }

      /* Popup container - can be anything you want */
      .popup {
        position: relative;
        cursor: pointer;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }

      /* The actual popup */
      .popup .popuptext {
        visibility: hidden;
        width: 180px;
        background-color: #555;
        color: #fff;
        text-align: center;
        border-radius: 6px;
        padding: 8px 0;
        position: absolute;
        z-index: 1000;
        bottom: 125%;
        left: 95%;
        margin-left: -80px;
      }

      /* Toggle this class - hide and show the popup */
      .popup .show {
        visibility: visible;
        -webkit-animation: fadeIn 1s;
        animation: fadeIn 1s;
      }

      /* Add animation (fade in the popup) */
      @-webkit-keyframes fadeIn {
        from {opacity: 0;}
        to {opacity: 1;}
      }

      @keyframes fadeIn {
        from {opacity: 0;}
        to {opacity:1 ;}
      }

      .linear-gradient {
        background: linear-gradient(#0000FF, #FF0000);
      }
      .linear-gradient {
          width:25px;
          height:100px;
      }

      .linear-gradient-2 {
        background: linear-gradient(#0000AA, #99D9EA);
      }
      .linear-gradient-2 {
          width:25px;
          height:100px;
      }

      .linear-gradient-3 {
        background: linear-gradient(#99D9EA, #FF7F27);
      }
      .linear-gradient-3 {
          width:25px;
          height:100px;
      }
    </style>
    <link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v3/3.15/themes/css/cartodb.css" />
    <link rel="stylesheet" href="css/styledLayerControl.css" />
    <!-- include cartodb.js library -->
    <script src="http://libs.cartocdn.com/cartodb.js/v3/3.15/cartodb.js"></script>
    <!-- styled layer control -->
    <script src="src/styledLayerControl.js"></script>


  </head>
  <body>
    <div id="map" ></div>
    <div class="navbar">GSW LEGENDS
      <button class="popup" onclick="transFunction()">Transitions
        <span class="popuptext" id="myPopup">
          <table style = "font-family: arial, sans-serif;border-collapse: collapse;width: 100%; font-size: 75%;">
            <tr>
            <td>Permanent</td>
            <td bgcolor=#0000dd style = "padding: 10px;"></td>
            </tr>
            <tr>
            <td>New Permanent</td>
            <td bgcolor=#21b14c style = "padding: 10px;"></td>
            </tr>
            <tr>
            <td>Lost Permanent</td>
            <td bgcolor=#93073e style = "padding: 10px;"></td>
            </tr>
            <tr>
            <td>Seasonal</td>
            <td bgcolor=#99d9ea style = "padding: 10px;"></td>
            </tr>
            <tr>
            <td>New Seasonal</td>
            <td bgcolor=#b5e51d style = "padding: 10px;"></td>
            </tr>
            <tr>
            <td>Lost Seasonal</td>
            <td bgcolor=#ebb3ba style = "padding: 10px;"></td>
            </tr>
            <tr>
            <td>Seasonal to Permanent</td>
            <td bgcolor=#ff8b37 style = "padding: 10px;"></td>
            </tr>
            <tr>
            <td>Permanent to Seasonal</td>
            <td bgcolor=#fedd66 style = "padding: 10px;"></td>
            </tr>
            <tr>
            <td>Ephemeral to Permanent</td>
            <td bgcolor=#7f7f7f style = "padding: 10px;"></td>
            </tr>
            <tr>
            <td>Permanent to Ephemeral</td>
            <td bgcolor=#acacac style = "padding: 10px;"></td>
            </tr>
          </table>
        </span>
      </button>
      <button class="popup" onclick="occurFunction()">Occurance
        <span class="popuptext" id="occurPopup">
          <table style = "font-family: arial, sans-serif;border-collapse: collapse;width: 100%; font-size: 75%;">
            <tr>
            <td rowspan="2" >The frequency (% of months) with which water was present on the surface from March 1984 to October 2015</td>
            <td>100%</td>
            <td rowspan="2"><div class="linear-gradient"></div></td>
            </tr>
            <tr>
            <td>1%</td>
            </tr>
          </table>
        </span>
      </button>
      <button class="popup" onclick="changeFunction()">Change
        <span class="popuptext" id="changePopup">
          <table style = "font-family: arial, sans-serif;border-collapse: collapse;width: 100%; font-size: 75%;">
            <tr>
            <td rowspan="3" >Where surface water occurrence increased, decreased or remained the same between 1984-1999 and 2000-2015.</td>
            <td>-100% loss</td>
            <td bgcolor=#FF0000 style = "padding: 15px;"></td>
            </tr>
            <tr>
            <td>No change</td>
            <td bgcolor=#000000 style = "padding: 15px;"></td>
            </tr>
            <tr>
            <td>100% increase</td>
            <td bgcolor=#00FF00 style = "padding: 15px;"></td>
            </tr>
          </table>
        </span>
      </button>
      <button class="popup" onclick="seasonFunction()">Seasonality
        <span class="popuptext" id="seasonPopup">
          <table style = "font-family: arial, sans-serif;border-collapse: collapse;width: 100%; font-size: 75%;">
            <tr>
            <td rowspan="2" >The number of months that water was present from October 2014 to October 2015</td>
            <td>12 months of water</td>
            <td rowspan="2"><div class="linear-gradient-2"></div></td>
            </tr>
            <tr>
            <td>1 month of water</td>
            </tr>
          </table>
        </span>
      </button>
      <button class="popup" onclick="recurFunction()">Recurrence
        <span class="popuptext" id="recurPopup">
          <table style = "font-family: arial, sans-serif;border-collapse: collapse;width: 100%; font-size: 75%;">
            <tr>
            <td rowspan="2" >The frequency with which water returns from years to year expressed as a percentage</td>
            <td>100% recurrence</td>
            <td rowspan="2"><div class="linear-gradient-3"></div></td>
            </tr>
            <tr>
            <td>1% recurrence</td>
            </tr>
          </table>
        </span>
      </button>
      <button class="popup" onclick="extentFunction()">Extent
        <span class="popuptext" id="extentPopup">
          <table style = "font-family: arial, sans-serif;border-collapse: collapse;width: 100%; font-size: 75%;">
            <tr>
            <td>Maximum Water Extent, water detected between 1984 and 2015</td>
            <td>Water detected</td>
            <td bgcolor=#6666FF style = "padding: 20px;"></td>
            </tr>
          </table>
        </span>
      </button>
      GET THE DATA
      </button>
      <button align="right" class="popup" onclick="dataFunction()">DATA
        <span class="popuptext" id="dataPopup">
          <table style = "font-family: arial, sans-serif;border-collapse: collapse;width: 100%; font-size: 100%;">
            <tr>
            <td><a href = "http://www.ngd.la/?p=1378&lang=en" target="_blank">NGD Orthophotos<a></td>
            </tr>
            <tr>
            <td><a href = "https://global-surface-water.appspot.com/download" target="_blank">Global Surface Water<a></td>
            </tr>
            <tr>
            <td><a href = "https://earthenginepartners.appspot.com/science-2013-global-forest/download_v1.2.html" target="_blank">Global Forest Cover<a></td>
            </tr>
            <tr>
            <td><a href = "https://lpdaac.usgs.gov/node/1281" target="_blank">Cropland Extent 2015<a></td>
            </tr>
            <tr>
            <td><a href = "https://www.dropbox.com/sh/y7flrclbrrcdz43/AAD0dBeSIN1gjutdOicqXxe3a/XCP?dl=0" target="_blank">IUCN<a></td>
            </tr>
            <tr>
            <td><a href = "https://cawa.carto.com/datasets" target="_blank">CAWA, WWF + WCS<a></td>
            </tr>
          </table>
        </span>
      </button>
    </div>

    <script>
    function transFunction() {
      var popup = document.getElementById("myPopup");
      popup.classList.toggle("show");
      }
    function occurFunction() {
      var popup = document.getElementById("occurPopup");
      popup.classList.toggle("show");
      }
    function changeFunction() {
        var popup = document.getElementById("changePopup");
        popup.classList.toggle("show");
        }
    function seasonFunction() {
        var popup = document.getElementById("seasonPopup");
        popup.classList.toggle("show");
        }
    function recurFunction() {
        var popup = document.getElementById("recurPopup");
        popup.classList.toggle("show");
        }
    function extentFunction() {
        var popup = document.getElementById("extentPopup");
        popup.classList.toggle("show");
        }
    function dataFunction() {
        var popup = document.getElementById("dataPopup");
        popup.classList.toggle("show");
        }
    </script>


    <script>
      function main()
        {
        var map = new L.Map('map', {
          center: [16.3739, 105.2106],
          zoom: 11,
          maxZoom: 22
        });

        var cfp = new L.LayerGroup();

        cartodb.createLayer(map, {
          user_name: 'cawa',
          type: 'cartodb',
          sublayers: [{
            sql: 'select * from cfp_ban_phaleng',
            cartocss: '#layer { polygon-fill: #1aefe5; polygon-opacity: 0.58; line-width: 1; line-color: #809e9c; line-opacity: 0.5;}',
            interactivity: ['cartodb_id', 'vname_en', 'vname_lao']
            }]
          }).addTo(cfp)
          .on('done', function(layer) {
            layer.setZIndex(22);
            layer.setInteraction(true);
            layer.on('featureOver', function(e, latlng, pos, data) {cartodb.log.log(e, latlng, pos, data);});
            layer.on('error', function(err) {cartodb.log.log('error: ' + err);});
            cartodb.vis.Vis.addInfowindow(map, layer.getSubLayer(0), ['vname_en', 'vname_lao'])
          })
          .on('error', function() {cartodb.log.log("some error occurred");});

        var flood = new L.LayerGroup();

        cartodb.createLayer(map, {
          user_name: 'cawa',
          type: 'cartodb',
          sublayers: [{
            sql: 'select * from xcp_mekong_2010_major_inundation',
            cartocss: '#layer { polygon-fill: #9B9DD9; polygon-opacity: 0.45; line-width: 1; line-color: #9B9DD9; line-opacity: 0.8;}'
            }]
          }).addTo(flood)
          .on('done', function(layer) {
            layer.setZIndex(22);
            layer.setInteraction(true);
            layer.on('featureOver', function(e, latlng, pos, data) {cartodb.log.log(e, latlng, pos, data);});
            layer.on('error', function(err) {cartodb.log.log('error: ' + err);});
          })
          .on('error', function() {cartodb.log.log("some error occurred");});
        
        var mp_pilot = new L.LayerGroup();

        cartodb.createLayer(map, {
          user_name: 'cawa',
          type: 'cartodb',
          sublayers: [{
            sql: 'select * from cawa_mimosa_pigra_pilot',
            cartocss: '#layer { polygon-fill: #d3379f; polygon-opacity: 0.58; line-width: 1; line-color: #5b0b41; line-opacity: 0.5;}',
            interactivity: ['cartodb_id', 'hectares']
            }]
          }).addTo(mp_pilot)
          .on('done', function(layer) {
            layer.setZIndex(22);
            layer.setInteraction(true);
            layer.on('featureOver', function(e, latlng, pos, data) {cartodb.log.log(e, latlng, pos, data);});
            layer.on('error', function(err) {cartodb.log.log('error: ' + err);});
            cartodb.vis.Vis.addInfowindow(map, layer.getSubLayer(0), ['hectares'])
          })
          .on('error', function() {cartodb.log.log("some error occurred");});

        var cawa_fcz = new L.LayerGroup();

        cartodb.createLayer(map, {
          user_name: 'cawa',
          type: 'cartodb',
          sublayers: [{
            sql: 'select * from cawa_xcp_fcz',
            cartocss: '#layer { polygon-fill: #EEBE7E; polygon-opacity: 0.58; line-width: 1; line-color: #ce7b0c; line-opacity: 0.5;}',
            interactivity: ['cartodb_id', 'vname_en']
            }]
          }).addTo(cawa_fcz)
          .on('done', function(layer) {
            layer.setZIndex(22);
            layer.setInteraction(true);
            layer.on('featureOver', function(e, latlng, pos, data) {cartodb.log.log(e, latlng, pos, data);});
            layer.on('error', function(err) {cartodb.log.log('error: ' + err);});
            cartodb.vis.Vis.addInfowindow(map, layer.getSubLayer(0), ['vname_en'])
          })
          .on('error', function() {cartodb.log.log("some error occurred");});


        var croc = new L.LayerGroup();

        cartodb.createLayer(map, {
          user_name: 'cawa',
          type: 'cartodb',
          sublayers: [{
            sql: 'select * from wcs_croc_conserv_zone',
            cartocss: '#layer { polygon-fill: #CC6550; polygon-opacity: 0.58; line-width: 1; line-color: #562218; line-opacity: 0.5;}',
            interactivity: ['cartodb_id', 'name']
            }]
          }).addTo(croc)
          .on('done', function(layer) {
            layer.setZIndex(22);
            layer.setInteraction(true);
            layer.on('featureOver', function(e, latlng, pos, data) {cartodb.log.log(e, latlng, pos, data);});
            layer.on('error', function(err) {cartodb.log.log('error: ' + err);});
            cartodb.vis.Vis.addInfowindow(map, layer.getSubLayer(0), ['name'])
          })
          .on('error', function() {cartodb.log.log("some error occurred");});

        var ramsar = new L.LayerGroup();

        cartodb.createLayer(map, {
          user_name: 'cawa',
          type: 'cartodb',
          sublayers: [{
            sql: 'select * from ramsar_existing',
            cartocss: '#layer { polygon-fill: #00A4E4; polygon-opacity: 0.58; line-width: 1; line-color: #0c475e; line-opacity: 0.5;}',
            interactivity: 'cartodb_id'
            }]
          }).addTo(ramsar)
          .on('done', function(layer) {
            layer.setZIndex(22);
            layer.setInteraction(true);
            layer.on('featureOver', function(e, latlng, pos, data) {cartodb.log.log(e, latlng, pos, data);});
            layer.on('error', function(err) {cartodb.log.log('error: ' + err);});
          })
          .on('error', function() {cartodb.log.log("some error occurred");});

        var core_zone = new L.LayerGroup();

        cartodb.createLayer(map, {
          user_name: 'cawa',
          type: 'cartodb',
          sublayers: [{
            sql: 'select * from ramsar_core_zone',
            cartocss: '#layer { polygon-fill: #EABFDA; polygon-opacity: 0.58; line-width: 1; line-color: #663353; line-opacity: 0.5;}',
            interactivity: 'cartodb_id'
            }]
          }).addTo(core_zone)
          .on('done', function(layer) {
            layer.setZIndex(22);
            layer.setInteraction(true);
            layer.on('featureOver', function(e, latlng, pos, data) {cartodb.log.log(e, latlng, pos, data);});
            layer.on('error', function(err) {cartodb.log.log('error: ' + err);});
          })
          .on('error', function() {cartodb.log.log("some error occurred");});

        var well = new L.LayerGroup();

        cartodb.createLayer(map, {
          user_name: 'cawa',
          type: 'cartodb',
          sublayers: [{
            sql: 'select the_geom_webmercator, title, desc_long as description, condition_ as condition, management, pictures, use_type as uses, extract_me as method, ownership, maintenanc as maintenance, maint_cost as cost, install_no as installation, type_well as type, notes, pump_capac as capacity, well_width as width, well_depth as depth from iucn_well',
            cartocss: '#layer { marker-width: 7; marker-fill: #75b63f; marker-fill-opacity: 0.9; marker-allow-overlap: true; marker-line-width: 0.6; marker-line-color: #FFF; marker-line-opacity: 1;}',
            interactivity: ['cartodb_id', 'title', 'description', 'condition', 'management', 'pictures', 'uses', 'method', 'ownership', 'maintenance', 'cost', 'installation', 'condition', 'type', 'notes', 'capacity', 'width', 'depth']
            }]
          }).addTo(well)
          .on('done', function(layer) {
            layer.setZIndex(22);
            layer.setInteraction(true);
            layer.on('featureOver', function(e, latlng, pos, data) {cartodb.log.log(e, latlng, pos, data);});
            layer.on('error', function(err) {cartodb.log.log('error: ' + err);});
            cartodb.vis.Vis.addInfowindow(map, layer.getSubLayer(0), ['title', 'description', 'condition', 'management', 'pictures', 'uses', 'method', 'ownership', 'maintenance', 'cost', 'installation', 'condition', 'type', 'notes', 'capacity', 'width', 'depth'])
          })
          .on('error', function() {cartodb.log.log("some error occurred");});

        var deep_pool = new L.LayerGroup();

        cartodb.createLayer(map, {
          user_name: 'cawa',
          type: 'cartodb',
          sublayers: [{
            sql: 'select the_geom_webmercator, village_en as village, name_en as name, depth_m as depth, cawa_id as id from va_data_deep_pools_points_v1_cawa_20180315',
            cartocss: '#layer { marker-fill: #2F7BAD; marker-fill-opacity: 0.9; marker-allow-overlap: true; marker-line-width: 0.6; marker-line-color: #FFF; marker-line-opacity: 1; marker-width: [depth]*5;}',
            interactivity: ['name', 'depth', 'id', 'village']
            }]
          }).addTo(deep_pool)
          .on('done', function(layer) {
            layer.setZIndex(22);
            layer.setInteraction(true);
            layer.on('featureOver', function(e, latlng, pos, data) {cartodb.log.log(e, latlng, pos, data);});
            layer.on('error', function(err) {cartodb.log.log('error: ' + err);});
            cartodb.vis.Vis.addInfowindow(map, layer.getSubLayer(0), ['name', 'depth', 'id', 'village'])
          })
          .on('error', function() {cartodb.log.log("some error occurred");});

        var water_control = new L.LayerGroup();

        cartodb.createLayer(map, {
          user_name: 'cawa',
          type: 'cartodb',
          sublayers: [{
            sql: 'select the_geom_webmercator, title, descriptio as description from iucn_water_control',
            cartocss: '#layer { marker-width: 7; marker-fill: #fe5a3c; marker-fill-opacity: 0.9; marker-allow-overlap: true; marker-line-width: 0.6; marker-line-color: #FFF; marker-line-opacity: 1;}',
            interactivity: ['cartodb_id', 'title', 'description']
            }]
          }).addTo(water_control)
          .on('done', function(layer) {
            layer.setZIndex(22);
            layer.setInteraction(true);
            layer.on('featureOver', function(e, latlng, pos, data) {cartodb.log.log(e, latlng, pos, data);});
            layer.on('error', function(err) {cartodb.log.log('error: ' + err);});
            cartodb.vis.Vis.addInfowindow(map, layer.getSubLayer(0), ['title', 'description'])
          })
          .on('error', function() {cartodb.log.log("some error occurred");});

        var pump = new L.LayerGroup();

        cartodb.createLayer(map, {
          user_name: 'cawa',
          type: 'cartodb',
          sublayers: [{
            sql: 'select the_geom_webmercator, pictures, hours, water_vol_ as volume, management, ownership, maintena_1 as costs, maintenanc as maintenance, install_no as installation, condition_ as condition, type_inf_1  as type, notes, desc_long as description, title, pump_capac as capacity, maint_cost as expenses, install_da  as install_date from iucn_pump',
            cartocss: '#layer { marker-width: 7; marker-fill: #a4651e; marker-fill-opacity: 0.9; marker-allow-overlap: true; marker-line-width: 0.6; marker-line-color: #FFF; marker-line-opacity: 1;}',
            interactivity: ['cartodb_id', 'title', 'pictures', 'hours', 'volume', 'management', 'ownership', 'costs', 'maintenance', 'installation', 'condition', 'type', 'notes', 'description', 'capacity', 'expenses','install_date']
            }]
          }).addTo(pump)
          .on('done', function(layer) {
            layer.setZIndex(22);
            layer.setInteraction(true);
            layer.on('featureOver', function(e, latlng, pos, data) {cartodb.log.log(e, latlng, pos, data);});
            layer.on('error', function(err) {cartodb.log.log('error: ' + err);});
            cartodb.vis.Vis.addInfowindow(map, layer.getSubLayer(0), ['title', 'description', 'pictures', 'hours', 'volume', 'management', 'ownership', 'costs', 'maintenance', 'installation', 'condition', 'type', 'notes', 'capacity', 'expenses','install_date'])
          })
          .on('error', function() {cartodb.log.log("some error occurred");});

        var erosion = new L.LayerGroup();

        cartodb.createLayer(map, {
          user_name: 'cawa',
          type: 'cartodb',
          sublayers: [{
            sql: 'select the_geom_webmercator, title, descriptio as description from iucn_erosion',
            cartocss: '#layer { marker-width: 7; marker-fill: #ff8b3f; marker-fill-opacity: 0.9; marker-allow-overlap: true; marker-line-width: 0.6; marker-line-color: #FFF; marker-line-opacity: 1;}',
            interactivity: ['cartodb_id', 'title', 'description']
            }]
          }).addTo(erosion)
          .on('done', function(layer) {
            layer.setZIndex(22);
            layer.setInteraction(true);
            layer.on('featureOver', function(e, latlng, pos, data) {cartodb.log.log(e, latlng, pos, data);});
            layer.on('error', function(err) {cartodb.log.log('error: ' + err);});
            cartodb.vis.Vis.addInfowindow(map, layer.getSubLayer(0), ['title', 'description'])
          })
          .on('error', function() {cartodb.log.log("some error occurred");});

        var canal = new L.LayerGroup();

        cartodb.createLayer(map, {
          user_name: 'cawa',
          type: 'cartodb',
          sublayers: [{
            sql: 'select the_geom_webmercator, title, desc_long as description, type_canal as type, pictures, gates_open as opening, management, condition_ as condition, ownership, install_no as installation, notes, canal_leng as length, canal_widt as width from iucn_canal',
            cartocss: '#layer { marker-width: 7; marker-fill: #cdd768; marker-fill-opacity: 0.9; marker-allow-overlap: true; marker-line-width: 0.6; marker-line-color: #FFF; marker-line-opacity: 1;}',
            interactivity: ['cartodb_id', 'title', 'description', 'type', 'pictures', 'opening', 'management', 'condition', 'ownership', 'installation', 'notes', 'length', 'width']
            }]
          }).addTo(canal)
          .on('done', function(layer) {
            layer.setZIndex(22);
            layer.setInteraction(true);
            layer.on('featureOver', function(e, latlng, pos, data) {cartodb.log.log(e, latlng, pos, data);});
            layer.on('error', function(err) {cartodb.log.log('error: ' + err);});
            cartodb.vis.Vis.addInfowindow(map, layer.getSubLayer(0), ['title', 'description', 'type', 'pictures', 'opening', 'management', 'condition', 'ownership', 'installation', 'notes', 'length', 'width'])
          })
          .on('error', function() {cartodb.log.log("some error occurred");});

        var dams = new L.LayerGroup();

        cartodb.createLayer(map, {
          user_name: 'cawa',
          type: 'cartodb',
          sublayers: [{
            sql: 'select the_geom_webmercator, title, desc_long as description, type_dam as type, pictures, gates_open as opening, water_cont as method, road, material, management, condition_ as condition, ownership, maintena_1 as maintenance, install_no as installation, notes, dam_height as height, dam_length as length, dam_width_ as width from iucn_dam',
            cartocss: '#layer { marker-width: 7; marker-fill: #7b7464; marker-fill-opacity: 0.9; marker-allow-overlap: true; marker-line-width: 0.6; marker-line-color: #FFF; marker-line-opacity: 1;}',
            interactivity: ['cartodb_id', 'title', 'description', 'type', 'pictures', 'opening', 'method', 'road', 'material', 'management', 'condition', 'ownership', 'maintenance', 'installation', 'notes', 'height', 'length', 'width']
            }]
          }).addTo(dams)
          .on('done', function(layer) {
            layer.setZIndex(22);
            layer.setInteraction(true);
            layer.on('featureOver', function(e, latlng, pos, data) {cartodb.log.log(e, latlng, pos, data);});
            layer.on('error', function(err) {cartodb.log.log('error: ' + err);});
            cartodb.vis.Vis.addInfowindow(map, layer.getSubLayer(0), ['title', 'description', 'type', 'pictures', 'opening', 'method', 'road', 'material', 'management', 'condition', 'ownership', 'maintenance', 'installation', 'notes', 'height', 'length', 'width'])
          })
          .on('error', function() {cartodb.log.log("some error occurred");});

        var bridges = new L.LayerGroup();

        cartodb.createLayer(map, {
          user_name: 'cawa',
          type: 'cartodb',
          sublayers: [{
            sql: 'select the_geom_webmercator,title, desc_long as description, install, maintenanc as maintenance, ownership, management, condition, type_bridg as type, materials, spans, pictures from iucn_bridges',
            cartocss: '#layer { marker-width: 7; marker-fill: #06a2e2; marker-fill-opacity: 0.9; marker-allow-overlap: true; marker-line-width: 0.6; marker-line-color: #FFF; marker-line-opacity: 1;}',
            interactivity: ['cartodb_id', 'title', 'description', 'install', 'maintenance', 'ownership', 'management', 'condition', 'type', 'materials', 'spans', 'pictures']
            }]
          }).addTo(bridges)
          .on('done', function(layer) {
            layer.setZIndex(22);
            layer.setInteraction(true);
            layer.on('featureOver', function(e, latlng, pos, data) {cartodb.log.log(e, latlng, pos, data);});
            layer.on('error', function(err) {cartodb.log.log('error: ' + err);});
            cartodb.vis.Vis.addInfowindow(map, layer.getSubLayer(0), ['title', 'description', 'install', 'maintenance', 'ownership', 'management', 'condition', 'type', 'materials', 'spans', 'pictures'])
          })
          .on('error', function() {cartodb.log.log("some error occurred");});

        var encroachment = new L.LayerGroup();

        cartodb.createLayer(map, {
          user_name: 'cawa',
          type: 'cartodb',
          sublayers: [{
            sql: 'select * from encroach',
            cartocss: '#layer { polygon-fill: #AD72B5; polygon-opacity: 0.58; line-width: 1; line-color: #481a4f; line-opacity: 0.5;}',
            interactivity: ['cartodb_id', 'hectares']
            }]
          }).addTo(encroachment)
          .on('done', function(layer) {
            layer.setZIndex(22);
            layer.setInteraction(true);
            layer.on('featureOver', function(e, latlng, pos, data) {cartodb.log.log(e, latlng, pos, data);});
            layer.on('error', function(err) {cartodb.log.log('error: ' + err);});
            cartodb.vis.Vis.addInfowindow(map, layer.getSubLayer(0), ['hectares'])
          })
          .on('error', function() {cartodb.log.log("some error occurred");});

        var grid = new L.LayerGroup();

        cartodb.createLayer(map, {
          user_name: 'cawa',
          type: 'cartodb',
          sublayers: [{
            sql: 'select * from cawa_survey_grid',
            cartocss: '#layer { polygon-fill: #CA6203; polygon-opacity: 0.58; line-width: 1; line-color: #4f2c0c; line-opacity: 0.5;}',
            interactivity: ['cartodb_id', 'gid']
            }]
          }).addTo(grid)
          .on('done', function(layer) {
            layer.setZIndex(22);
            layer.setInteraction(true);
            layer.on('featureOver', function(e, latlng, pos, data) {cartodb.log.log(e, latlng, pos, data);});
            layer.on('error', function(err) {cartodb.log.log('error: ' + err);});
            cartodb.vis.Vis.addInfowindow(map, layer.getSubLayer(0), ['gid'])
          })
          .on('error', function() {cartodb.log.log("some error occurred");});

        var mimosa = new L.LayerGroup();

        cartodb.createLayer(map, {
          user_name: 'cawa',
          type: 'cartodb',
          sublayers: [{
            sql: 'select * from cawa_mimosa_pigra_survey',
            cartocss: '#layer { marker-width: 7; marker-fill: #5252c4; marker-fill-opacity: 0.9; marker-allow-overlap: true; marker-line-width: 0.6; marker-line-color: #FFF; marker-line-opacity: 1;}',
            interactivity: ['cartodb_id', 'id']
            }]
          }).addTo(mimosa)
          .on('done', function(layer) {
            layer.setZIndex(22);
            layer.setInteraction(true);
            layer.on('featureOver', function(e, latlng, pos, data) {cartodb.log.log(e, latlng, pos, data);});
            layer.on('error', function(err) {cartodb.log.log('error: ' + err);});
            cartodb.vis.Vis.addInfowindow(map, layer.getSubLayer(0), ['id'])
          })
          .on('error', function() {cartodb.log.log("some error occurred");});

          var monkey = new L.LayerGroup();

          cartodb.createLayer(map, {
            user_name: 'cawa',
            type: 'cartodb',
            sublayers: [{
              sql: 'select * from monkey_forest',
              cartocss: '#layer { polygon-fill: #784860; polygon-opacity: 0.58; line-width: 1; line-color: #604860; line-opacity: 0.5;}',
              interactivity: ['cartodb_id', 'area_ha']
              }]
            }).addTo(monkey)
            .on('done', function(layer) {
              layer.setZIndex(22);
              layer.setInteraction(true);
              layer.on('featureOver', function(e, latlng, pos, data) {cartodb.log.log(e, latlng, pos, data);});
              layer.on('error', function(err) {cartodb.log.log('error: ' + err);});
              cartodb.vis.Vis.addInfowindow(map, layer.getSubLayer(0), ['area_ha'])
            })
            .on('error', function() {cartodb.log.log("some error occurred");});

        var core_z_proposed = new L.LayerGroup();

        cartodb.createLayer(map, {
          user_name: 'cawa',
          type: 'cartodb',
          sublayers: [{
            sql: 'select * from cawa_core_zone_proposed',
            cartocss: '#layer { polygon-fill: #F4F134; polygon-opacity: 0.40; line-width: 1; line-color: #77760d; line-opacity: 0.5;}',
            interactivity: 'cartodb_id'
            }]
          }).addTo(core_z_proposed)
          .on('done', function(layer) {
            layer.setZIndex(22);
            layer.setInteraction(true);
            layer.on('featureOver', function(e, latlng, pos, data) {cartodb.log.log(e, latlng, pos, data);});
            layer.on('error', function(err) {cartodb.log.log('error: ' + err);});
          })
          .on('error', function() {cartodb.log.log("some error occurred");});

        var dyke = new L.LayerGroup();

          cartodb.createLayer(map, {
            user_name: 'cawa',
            type: 'cartodb',
            sublayers: [{
              sql: 'select * from phai_jiew_makmee_dyke',
              cartocss: '#layer {::case {line-width: 5; line-color:#d83;}::fill {line-width: 2.5; line-color:#fe3;}}',
              interactivity: 'cartodb_id'
              }]
            }).addTo(dyke)
            .on('done', function(layer) {
              layer.setZIndex(22);
              layer.setInteraction(true);
              layer.on('featureOver', function(e, latlng, pos, data) {cartodb.log.log(e, latlng, pos, data);});
              layer.on('error', function(err) {cartodb.log.log('error: ' + err);});
            })
            .on('error', function() {cartodb.log.log("some error occurred");});


        var ramsar_proposed = new L.LayerGroup();

        cartodb.createLayer(map, {
          user_name: 'cawa',
          type: 'cartodb',
          sublayers: [{
            sql: 'select * from cawa_ramsar_proposed',
            cartocss: '#layer { polygon-fill: #A4651E; polygon-opacity: 0.58; line-width: 1; line-color: #59350d; line-opacity: 0.5;}',
            interactivity: 'cartodb_id'
            }]
          }).addTo(ramsar_proposed)
          .on('done', function(layer) {
            layer.setZIndex(22);
            layer.setInteraction(true);
            layer.on('featureOver', function(e, latlng, pos, data) {cartodb.log.log(e, latlng, pos, data);});
            layer.on('error', function(err) {cartodb.log.log('error: ' + err);});
          })
          .on('error', function() {cartodb.log.log("some error occurred");});

        var ngd_elev = new L.LayerGroup();

        cartodb.createLayer(map, {
          user_name: 'cawa',
          type: 'cartodb',
          sublayers: [{
            sql: 'select the_geom_webmercator, _desc as description, elevation from ngd_elevation_points',
            cartocss: '#layer {marker-width: 7; marker-fill: ramp([description], (#F73737, #FFFF00), ("Spot Height", "Geodetic Point"), "="); marker-fill-opacity: 1; marker-allow-overlap: true; marker-line-width: 0.60; marker-line-color: #E1DAC5; marker-line-opacity: 1;}',
            interactivity: ['cartodb_id', 'description', 'elevation']
            }]
          }).addTo(ngd_elev)
          .on('done', function(layer) {
            layer.setZIndex(22);
            layer.setInteraction(true);
            layer.on('featureOver', function(e, latlng, pos, data) {cartodb.log.log(e, latlng, pos, data);});
            layer.on('error', function(err) {cartodb.log.log('error: ' + err);});
            cartodb.vis.Vis.addInfowindow(map, layer.getSubLayer(0), ['description', 'elevation'])
          })
          .on('error', function() {cartodb.log.log("some error occurred");});

        var ngd_village = new L.LayerGroup();

        cartodb.createLayer(map, {
          user_name: 'cawa',
          type: 'cartodb',
          sublayers: [{
            sql: 'select the_geom_webmercator, kum_code, kname as kumban, vname as village from ngd_champhone_villages',
            cartocss: '#layer {marker-width: 7; marker-fill: ramp([kum_code], (#5F4690, #1D6996, #38A6A5, #0F8554, #73AF48, #EDAD08, #E17C05, #CC503E, #94346E, #6F4070, #666666), ("130905", "130901", "130907", "130908", "130912", "130903", "130902", "130906", "130904", "130909"), "="); marker-fill-opacity: 1; marker-allow-overlap: true; marker-line-width: 0.60; marker-line-color: #E1DAC5; marker-line-opacity: 1;}',
            interactivity: ['cartodb_id', 'kumban', 'kumcode','village']
            }]
          }).addTo(ngd_village)
          .on('done', function(layer) {
            layer.setZIndex(22);
            layer.setInteraction(true);
            layer.on('featureOver', function(e, latlng, pos, data) {cartodb.log.log(e, latlng, pos, data);});
            layer.on('error', function(err) {cartodb.log.log('error: ' + err);});
            cartodb.vis.Vis.addInfowindow(map, layer.getSubLayer(0), ['kumban', 'village'])
          })
          .on('error', function() {cartodb.log.log("some error occurred");});

        var built = new L.LayerGroup();

        cartodb.createLayer(map, {
          user_name: 'cawa',
          type: 'cartodb',
          sublayers: [{
            sql: 'select * from ngd_champhone_built_up_area',
            cartocss: '#layer { polygon-fill: #93918E; polygon-opacity: 0.58; line-width: 1; line-color: #084608; line-opacity: 0.5;}',
            interactivity: 'cartodb_id'
            }]
          }).addTo(built)
          .on('done', function(layer) {
            layer.setZIndex(22);
            layer.setInteraction(true);
            layer.on('featureOver', function(e, latlng, pos, data) {cartodb.log.log(e, latlng, pos, data);});
            layer.on('error', function(err) {cartodb.log.log('error: ' + err);});
          })
          .on('error', function() {cartodb.log.log("some error occurred");});

        var cp_sm_ob = new L.LayerGroup();

        cartodb.createLayer(map, {
          user_name: 'cawa',
          type: 'cartodb',
          sublayers: [{
            sql: 'select the_geom_webmercator, _desc as description, eng_name as name from ngd_champhone_small_object',
            cartocss: '#layer { marker-width: 7; marker-fill: ramp([description], (#5F4690, #e48509, #38A6A5, #0F8554, #73AF48, #bf0101), ("School", "Buddhist Monastery", "Bridge (Length >= 3m)", "Dam (non-practicable)", "Dam (practicable)", "Airfield"), "="); marker-fill-opacity: 0.9; marker-allow-overlap: true; marker-line-width: 0.6; marker-line-color: #FFF; marker-line-opacity: 1;}',
            interactivity: ['cartodb_id', 'description', 'name']
            }]
          }).addTo(cp_sm_ob)
          .on('done', function(layer) {
            layer.setZIndex(22);
            layer.setInteraction(true);
            layer.on('featureOver', function(e, latlng, pos, data) {cartodb.log.log(e, latlng, pos, data);});
            layer.on('error', function(err) {cartodb.log.log('error: ' + err);});
            cartodb.vis.Vis.addInfowindow(map, layer.getSubLayer(0), ['description', 'name'])
          })
          .on('error', function() {cartodb.log.log("some error occurred");});

      var wwffcz = new L.LayerGroup();

        cartodb.createLayer(map, {
          user_name: 'cawa',
          type: 'cartodb',
          sublayers: [{
            sql: 'select the_geom_webmercator, date_annou as date, fcz_area_h as area_ha, fcz_depth_ as depth_m, fcz_name_l as name, fcz_name_e as en_name, river_na_1 as river, river_name as en_river, vname_eng as en_village, vname_lao as village from fcz_wwf',
            cartocss: '#layer { marker-width: 7; marker-fill: #EEBE7E; marker-fill-opacity: 0.9; marker-allow-overlap: true; marker-line-width: 1; marker-line-color: #ffe9cc; marker-line-opacity: 1;}',
            interactivity: ['cartodb_id', 'date', 'area', 'depth', 'name', 'en-name', 'river', 'en-river', 'en-village', 'village']
            }]
          }).addTo(wwffcz)
          .on('done', function(layer) {
            layer.setZIndex(22);
            layer.setInteraction(true);
            layer.on('featureOver', function(e, latlng, pos, data) {cartodb.log.log(e, latlng, pos, data);});
            layer.on('error', function(err) {cartodb.log.log('error: ' + err);});
            cartodb.vis.Vis.addInfowindow(map, layer.getSubLayer(0), ['name', 'en_name', 'river', 'en_river', 'village', 'en_village', 'date', 'area_ha', 'depth_m'])
          })
          .on('error', function() {cartodb.log.log("some error occurred");});

        var drone_survey = new L.LayerGroup();

        cartodb.createLayer(map, {
          user_name: 'cawa',
          type: 'cartodb',
          sublayers: [{
            sql: 'select * from mp_svk_drone_survey_extents',
            cartocss: '#layer { polygon-fill: #A4651E; polygon-opacity: 0; line-width: 2; line-color: #320C01; line-opacity: 1; line-dasharray: 2,1}',
            interactivity: ['cartodb_id', 'name', 'cawa_id']
            }]
          }).addTo(drone_survey)
          .on('done', function(layer) {
            layer.setZIndex(22);
            layer.setInteraction(true);
            layer.on('featureOver', function(e, latlng, pos, data) {cartodb.log.log(e, latlng, pos, data);});
            layer.on('error', function(err) {cartodb.log.log('error: ' + err);});
            cartodb.vis.Vis.addInfowindow(map, layer.getSubLayer(0), ['name', 'cawa_id'])
          })
          .on('error', function() {cartodb.log.log("some error occurred");});

        var drone_test = new L.LayerGroup();

        L.tileLayer("https://api.mapbox.com/styles/v1/philknight/cjdxw6iyi1ib52speq5gwqq05/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoicGhpbGtuaWdodCIsImEiOiI3NzIwOGJlMGU5M2NhODA3NjJhNmNlZTQxZTNkZWY4YyJ9.Wqxpbl4-w_Qj6H8mSzyNLw",
          {format: "image/png",
          maxZoom: 22,
          minZoom: 0,
          attribution: '© <a href="https://www.mapbox.com/about/maps/">Mapbox</a>',
          zIndex: 2
        }).addTo(drone_test);

        var drone_survey2 = new L.LayerGroup();

        L.tileLayer("https://api.mapbox.com/styles/v1/philknight/cjennzpzae4c42so2k3ui4jmf/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoicGhpbGtuaWdodCIsImEiOiI3NzIwOGJlMGU5M2NhODA3NjJhNmNlZTQxZTNkZWY4YyJ9.Wqxpbl4-w_Qj6H8mSzyNLw",
          {format: "image/png",
          maxZoom: 22,
          minZoom: 0,
          attribution: '© <a href="https://www.mapbox.com/about/maps/">Mapbox</a>',
          zIndex: 2
        }).addTo(drone_survey2);

        var  iard = new L.LayerGroup();

        L.tileLayer("https://api.mapbox.com/styles/v1/philknight/cjdx6an7g7ory2sjow6cw0c4u/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoicGhpbGtuaWdodCIsImEiOiI3NzIwOGJlMGU5M2NhODA3NjJhNmNlZTQxZTNkZWY4YyJ9.Wqxpbl4-w_Qj6H8mSzyNLw",
          {format: "image/png",
          maxZoom: 22,
          minZoom: 0,
          attribution: '© <a href="https://www.mapbox.com/about/maps/">Mapbox</a>',
          zIndex: 2
        }).addTo(iard);

        var dong_savang_sat = new L.LayerGroup();

        L.tileLayer("https://api.mapbox.com/styles/v1/philknight/cjdx5oqkp7o7x2sjokj2sxmyu/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoicGhpbGtuaWdodCIsImEiOiI3NzIwOGJlMGU5M2NhODA3NjJhNmNlZTQxZTNkZWY4YyJ9.Wqxpbl4-w_Qj6H8mSzyNLw",
          {format: "image/png",
          maxZoom: 22,
          minZoom: 0,
          attribution: '© <a href="https://www.mapbox.com/about/maps/">Mapbox</a>',
          zIndex: 2
        }).addTo(dong_savang_sat);

        var dong_savang_topo = new L.LayerGroup();

        L.tileLayer("https://api.mapbox.com/styles/v1/philknight/cjdx651qw7owu2snn259p51n3/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoicGhpbGtuaWdodCIsImEiOiI3NzIwOGJlMGU5M2NhODA3NjJhNmNlZTQxZTNkZWY4YyJ9.Wqxpbl4-w_Qj6H8mSzyNLw",
          {format: "image/png",
          maxZoom: 22,
          minZoom: 0,
          attribution: '© <a href="https://www.mapbox.com/about/maps/">Mapbox</a>',
          zIndex: 2
        }).addTo(dong_savang_topo);

        var all_champhone_irri_topo = new L.LayerGroup();

        L.tileLayer("https://api.mapbox.com/styles/v1/philknight/cjdzdca766pvf2rpfvqw6sghd/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoicGhpbGtuaWdodCIsImEiOiI3NzIwOGJlMGU5M2NhODA3NjJhNmNlZTQxZTNkZWY4YyJ9.Wqxpbl4-w_Qj6H8mSzyNLw",
          {format: "image/png",
          maxZoom: 22,
          minZoom: 0,
          attribution: '© <a href="https://www.mapbox.com/about/maps/">Mapbox</a>',
          zIndex: 2
        }).addTo(all_champhone_irri_topo);

        var all_champhone_irri_lc = new L.LayerGroup();

        L.tileLayer("https://api.mapbox.com/styles/v1/philknight/cjdzdx7o56e522sqk8nz9gf74/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoicGhpbGtuaWdodCIsImEiOiI3NzIwOGJlMGU5M2NhODA3NjJhNmNlZTQxZTNkZWY4YyJ9.Wqxpbl4-w_Qj6H8mSzyNLw",
          {format: "image/png",
          maxZoom: 22,
          minZoom: 0,
          attribution: '© <a href="https://www.mapbox.com/about/maps/">Mapbox</a>',
          zIndex: 2
        }).addTo(all_champhone_irri_lc);

        var all_champhone_irri_sat = new L.LayerGroup();

        L.tileLayer("https://api.mapbox.com/styles/v1/philknight/cjdzdzcnu6mqf2tk47a2y3qd6/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoicGhpbGtuaWdodCIsImEiOiI3NzIwOGJlMGU5M2NhODA3NjJhNmNlZTQxZTNkZWY4YyJ9.Wqxpbl4-w_Qj6H8mSzyNLw",
          {format: "image/png",
          maxZoom: 22,
          minZoom: 0,
          attribution: '© <a href="https://www.mapbox.com/about/maps/">Mapbox</a>',
          zIndex: 2
        }).addTo(all_champhone_irri_sat);
        

        var ngd = new L.LayerGroup();

        L.tileLayer.wms('http://www.ngd.la/ngd_public/wms?',
        {layers: 'NGD_South_Orthophotos',
        format: 'image/png',
        crs: L.CRS.EPSG4326,
        attribution: "©2015 National Geographic Department of Lao People's Democratic Republic",
        zIndex: 19
        }).addTo(ngd);

        var goog = new L.LayerGroup();

        L.tileLayer('http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}',
        {maxZoom: 22,
        subdomains:['mt0','mt1','mt2','mt3'],
        crs: L.CRS.EPSG3857,
        attribution: "©2017 Google",
        zIndex: 0
        }).addTo(map, goog);



        var transitions = new L.LayerGroup();

        L.tileLayer('http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}',
          {maxZoom: 20,
          subdomains:['mt0','mt1','mt2','mt3'],
          crs: L.CRS.EPSG3857,
          attribution: "©2017 Google",
          zIndex: 17
          }).addTo(transitions);

        L.tileLayer("https://storage.googleapis.com/global-surface-water/maptiles/transitions/{z}/{x}/{y}.png",
          {format: "image/png",
          maxZoom: 13,
          errorTileUrl : "https://storage.googleapis.com/global-surface-water/downloads_ancillary/blank.png",
          attribution: "2016 EC JRC/Google",
          zIndex: 18
          }).addTo(transitions);

        var occurrence = new L.LayerGroup();

        L.tileLayer('http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}',
          {maxZoom: 20,
          subdomains:['mt0','mt1','mt2','mt3'],
          crs: L.CRS.EPSG3857,
          attribution: "©2017 Google",
          zIndex: 15
          }).addTo(occurrence);

        L.tileLayer("https://storage.googleapis.com/global-surface-water/maptiles/occurrence/{z}/{x}/{y}.png",
          { format: "image/png",
            maxZoom: 13,
            errorTileUrl : "https://storage.googleapis.com/global-surface-water/downloads_ancillary/blank.png",
            attribution: "2016 EC JRC/Google",
            zIndex: 16
          }).addTo(occurrence);

        var change = new L.LayerGroup();

        L.tileLayer('http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}',
          {maxZoom: 20,
          subdomains:['mt0','mt1','mt2','mt3'],
          crs: L.CRS.EPSG3857,
          attribution: "©2017 Google",
          zIndex:13
          }).addTo(change);

        L.tileLayer("https://storage.googleapis.com/global-surface-water/maptiles/change/{z}/{x}/{y}.png",
          { format: "image/png",
            maxZoom: 13,
            errorTileUrl : "https://storage.googleapis.com/global-surface-water/downloads_ancillary/blank.png",
            attribution: "2016 EC JRC/Google",
            zIndex: 14
          }).addTo(change);

        var seasonality = new L.LayerGroup();

        L.tileLayer('http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}',
          {maxZoom: 20,
          subdomains:['mt0','mt1','mt2','mt3'],
          crs: L.CRS.EPSG3857,
          attribution: "©2017 Google",
          zIndex: 11
          }).addTo(seasonality);

        L.tileLayer("https://storage.googleapis.com/global-surface-water/maptiles/seasonality/{z}/{x}/{y}.png",
          { format: "image/png",
            maxZoom: 13,
            errorTileUrl : "https://storage.googleapis.com/global-surface-water/downloads_ancillary/blank.png",
            attribution: "2016 EC JRC/Google",
            zIndex: 12
          }).addTo(seasonality);

        var recurrence  = new L.LayerGroup();

        L.tileLayer('http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}',
          {maxZoom: 20,
          subdomains:['mt0','mt1','mt2','mt3'],
          crs: L.CRS.EPSG3857,
          attribution: "©2017 Google",
          zIndex: 9
          }).addTo(recurrence);

        L.tileLayer("https://storage.googleapis.com/global-surface-water/maptiles/recurrence/{z}/{x}/{y}.png",
          { format: "image/png",
            maxZoom: 13,
            errorTileUrl : "https://storage.googleapis.com/global-surface-water/downloads_ancillary/blank.png",
            attribution: "2016 EC JRC/Google",
            zIndex: 10
          }).addTo(recurrence);

        var extent  = new L.LayerGroup();

        L.tileLayer('http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}',
          {maxZoom: 20,
          subdomains:['mt0','mt1','mt2','mt3'],
          crs: L.CRS.EPSG3857,
          attribution: "©2017 Google",
          zIndex: 7
          }).addTo(extent);

        L.tileLayer("https://storage.googleapis.com/global-surface-water/maptiles/extent/{z}/{x}/{y}.png",
          { format: "image/png",
            maxZoom: 13,
            errorTileUrl : "https://storage.googleapis.com/global-surface-water/downloads_ancillary/blank.png",
            attribution: "2016 EC JRC/Google",
            zIndex: 8
          }).addTo(extent);

          var forest_cover = new L.LayerGroup();

           L.tileLayer('http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}',
             {maxZoom: 20,
             subdomains:['mt0','mt1','mt2','mt3'],
             crs: L.CRS.EPSG3857,
             attribution: "©2017 Google",
             zIndex: 5
           }).addTo(forest_cover);

           L.tileLayer('http://earthengine.google.org/static/hansen_2013/tree_alpha/{z}/{x}/{y}.png',
           { format: "image/png",
              maxZoom: 20,
              attribution: "Hansen/UMD/Google/USGS/NASA",
              zIndex: 6
            }).addTo(forest_cover)

            var forest_loss = new L.LayerGroup();

             L.tileLayer('http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}',
               {maxZoom: 20,
               subdomains:['mt0','mt1','mt2','mt3'],
               crs: L.CRS.EPSG3857,
               attribution: "©2017 Google",
               zIndex: 3
             }).addTo(forest_loss);

             L.tileLayer('https://storage.googleapis.com/earthenginepartners-hansen/tiles/gfc_v1.3/loss_alpha/{z}/{x}/{y}.png',
             { format: "image/png",
                maxZoom: 20,
                attribution: "Hansen/UMD/Google/USGS/NASA",
                zIndex: 4
              }).addTo(forest_loss)

        var forest_gain = new L.LayerGroup();

         L.tileLayer('http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}',
           {maxZoom: 20,
           subdomains:['mt0','mt1','mt2','mt3'],
           crs: L.CRS.EPSG3857,
           attribution: "©2017 Google",
           zIndex: 1
         }).addTo(forest_gain);

         L.tileLayer('https://storage.googleapis.com/earthenginepartners-hansen/tiles/gfc2015/gain_alpha/{z}/{x}/{y}.png',
         { format: "image/png",
            maxZoom: 20,
            attribution: "Hansen/UMD/Google/USGS/NASA",
            zIndex: 2
          }).addTo(forest_gain)

         var cropland = new L.LayerGroup();

         L.tileLayer('http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}',
           {maxZoom: 20,
           subdomains:['mt0','mt1','mt2','mt3'],
           crs: L.CRS.EPSG3857,
           attribution: "©2017 Google",
           zIndex: 1
         }).addTo(cropland);

         L.tileLayer('https://{s}.tiles.croplands.org/{z}/{x}/{y}/tile.png?collection=users/croplandsdev/products&id=World30m_30m_L1_v20170722&band=class',
          {maxZoom: 20,
          crs: L.CRS.EPSG3857,
          attribution: "Thenkabail/USGS/NASA",
          zIndex: 2
          }).addTo(cropland);


        var vectors = [
                        {
                          groupName: "Drone Survey Sites",
                          layers: {"Drone Surveys": drone_survey}
                        },{
                          groupName: "Conservation Zones",
                          layers: {"WWF Fish Conservation Zones": wwffcz, "WCS Crocodile Conservation Zones": croc}
                        },{
                          groupName: "MRC Flood",
                          layers: {"Inundation Extent Year 2000": flood}
                        },{
                          groupName: "National Geographic Deparment",
                          layers: {"NGD Small Objects": cp_sm_ob, "NGD Built Up Area": built, "NGD Villages": ngd_village, "NGD Elevation Point": ngd_elev}
                        },{
                          groupName: "Ramsar Boundary",
                          layers: {"Ramsar Boundary Existing": ramsar, "Ramsar Core Zone Existing": core_zone, "CAWA Ramsar Boundary Proposed": ramsar_proposed, "CAWA Core Zone Boundary Proposed": core_z_proposed}
                        },{
                          groupName: "CAWA Project",
                          layers: {"Deep Pools": deep_pool, "CAWA Mimosa Pigra Survey Points": mimosa, "CAWA Survey Grid": grid, "CAWA Agricultural Encroachment Survey": encroachment, "Monkey Forest Boundary": monkey, "CAWA Fish Conservation Zones": cawa_fcz, "CAWA Mimosa pigra Control Pilot": mp_pilot, "Community Fish Pond": cfp, "Eco-Tourism Route": dyke}
                        },{
                          groupName: "IUCN",
                          layers: {"Bridge Survey": bridges, "Dam Survey": dams, "Canal Survey": canal, "Erosion Survey": erosion, "Pump Survey": pump, "Water Control Inf. Survey": water_control, "Well Survey": well}
                        }
                      ];
        var imagery = [
                        {
                          groupName: "Basemaps",
                          layers:{"Google Satellite": goog}
                        },{
                          groupName: "Global Surface Water",
                          layers: {"Transitions": transitions, "Occurrence": occurrence,"Change": change, "Seasonality": seasonality, "Recurrence ": recurrence, "Extent": extent}
                        },{
                          groupName: "Global Forest Change",
                          layers: {"Forest Cover 2000": forest_cover, "Forest Cover Loss": forest_loss, "Forest Cover Gain": forest_gain}
                        },{
                          groupName: "Global Cropland",
                          layers: {"Cropland Extent 2015": cropland}
                        },{
                          groupName: "Irrigation Maps",
                          layers:{"IARD": iard, "Dong Savang Thong Satellite": dong_savang_sat, "Dong Savang Thong Topographic": dong_savang_topo, "Champhone & Xonbouli Topo": all_champhone_irri_topo, "Champhone & Xonbouli Land Cover": all_champhone_irri_lc, "Champhone & Xonbouli Satellite": all_champhone_irri_sat}
                        },{
                          groupName: "Drone Imagery",
                          layers:{"Dec-Jan 2017/18": drone_test, "March 2018": drone_survey2}
                        }
                      ];

        var options = {
                        collapsed : true,
                        autoZIndex  :   false,
                        container_width 	: "300px",
                    		container_maxHeight : "1000px",
                    		group_maxHeight     : "500px",
                    		exclusive       	: true
                    	};

        L.Control.styledLayerControl(imagery,vectors,options).addTo(map);

      }
      // you could use $(window).load(main);
      window.onload = main;
    </script>

  </body>
</html>
